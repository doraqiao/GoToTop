<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Jquery返回顶部demo</title>
    <style type="text/css">
        .goTop >img{
            width: 50px;
            height: 50px;
            cursor: pointer;
        }
        .goTop{
            position: fixed;
            right : 20px;
            bottom : 20px;
        }
    </style>
</head>
<body>
<p>
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    <img src="https://3vj-render.3vjia.com//UpFile_Render/C00000022/DesignSchemeRenderFile/201803/31/10156296/b61b1c250f834a80b358ec475e359b15.jpg?x-oss-process=image/resize,m_fixed,h_235,w_315&v=3.0.0.0.20180418">
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    <img src="https://3vj-render.3vjia.com//UpFile_Render/C00000022/DesignSchemeRenderFile/201803/31/10156296/b61b1c250f834a80b358ec475e359b15.jpg?x-oss-process=image/resize,m_fixed,h_235,w_315&v=3.0.0.0.20180418">
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    <img src="https://3vj-render.3vjia.com//UpFile_Render/C00000022/DesignSchemeRenderFile/201803/31/10156296/b61b1c250f834a80b358ec475e359b15.jpg?x-oss-process=image/resize,m_fixed,h_235,w_315&v=3.0.0.0.20180418">
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    <img src="https://3vj-render.3vjia.com//UpFile_Render/C00000022/DesignSchemeRenderFile/201803/31/10156296/b61b1c250f834a80b358ec475e359b15.jpg?x-oss-process=image/resize,m_fixed,h_235,w_315&v=3.0.0.0.20180418">
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
    1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>1<br/>
</p>

<div class="goTop" id="js-go_top"><img src="icon_top.png" alt="回到顶部图片"></div>
<script src="http://libs.baidu.com/jquery/1.10.2/jquery.min.js"></script>
<script>
    (function($){
    //参数opt表示后期根据需求设置icon的css属性值
    jQuery.fn.gotoTop = function(opt){
        var ele = this;
        var win = $(window);
        var doc = $('html,body');
        var index = false;

        //默认icon的css属性值
        var defaultOpt = {
            offset : 420,
            speed : 500,
            iconSpeed : 200,
            animationShow : {'opacity' : '1'},
            animationHide : {'opacity' : '0'}
        };

        //将自定义icon的css属性值更新到options中
        var options = $.extend(defaultOpt,opt);

        //点击icon返回顶部
        ele.click(function(){
            doc.animate({scrollTop : '0'},options.speed);
        });

        //判断icon动画样式是不是transform
        $.each(options.animationShow,function(i){
            if(i == 'transform'){
                index = true;
            }
        });

        //icon动画样式显示时
        function animateShow(){
            if(index){
                ele.css(options.animationShow);
            }else{
                ele.stop().animate(options.animationShow,options.iconSpeed);
            }
        }

        //icon动画隐藏时
        function animateHide(){
            if(index){
                ele.css(options.animationHide);
            }else{
                ele.stop().animate(options.animationHide,options.iconSpeed);
            }
        }

        //当屏幕的高度大于options.offset时，显示icon（前提是icon事先隐藏了）
        win.scroll(function(){
            /*                console.log(win.scrollTop())*/
            if(win.scrollTop() > options.offset){
                animateShow();
            }else{
                animateHide();
            }
        });

        //如果屏幕里顶部的高度大于设置的offset，则直接将icon显示出来（而不是等滚动事件发生后才显示出来）
        if(win.scrollTop() > options.offset){
            ele.css(options.animationShow);
        }else{
            ele.css(options.animationHide);
        }
    }
}(jQuery));
   
    //示例
    $('#js-go_top').gotoTop({
        offset : 500, //距离顶部的位置
        speed : 300, //移动到顶部的速度
        /*     iconSpeed : 300, //icon动画样式的速度*/
        animationShow : {
            'transform' : 'translate(0,0)',
            'transition': 'transform .5s ease-in-out'
        }, //icon动画样式显示时
        animationHide : {
            'transform' : 'translate(80px,0)',
            'transition': 'transform .5s ease-in-out'
        } //icon动画样式隐藏时
    });
</script>
</body>
</html>
